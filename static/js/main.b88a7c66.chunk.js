(this["webpackJsonpmembrane-simulation"]=this["webpackJsonpmembrane-simulation"]||[]).push([[0],{20:function(e,t,a){e.exports=a(33)},25:function(e,t,a){},26:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),l=a.n(o),s=(a(25),a(26),a(63)),i=a(62),c=a(15),u=a.n(c);a(27);function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v(e);if(t){var r=v(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h(this,a)}}function h(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){for(var a=function(e){var t="",a="";for(var n in e)t+=n+",",a+=e[n]+",";return t.slice(0,-1)+"\n"+a.slice(0,-1)}(e)+"\n\n",n=Object.keys(t),r=0;r<n.length;r++)a+=n[r]+",";a=a.slice(0,a.length-1)+"\n";for(var o=0;o<t[n[0]].length;o++){for(var l=0;l<n.length;l++)a+=t[n[l]][o]+",";a=a.slice(0,a.length-1)+"\n"}return a}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,a,n,o=f(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={permeate_valve:!0,feed_valve:!1,buffer_valve:!0,p_init_mass:0,membrane_selected:"1"},t.membrane={1:{dex_rej:.92,rb_rej:.01,surface_area:1},2:{dex_rej:.92,rb_rej:.1,surface_area:1},3:{dex_rej:.65,rb_rej:.01,surface_area:1}},t.valveConstants={buffer_closed_volume_percentage_loss_per_hour:.1,feed_open_volume_percentage_loss_per_hour:.2,permeate_closed_tmp_percentage_loss_per_hour:.3},t.molarMass={dex:504.4,rb:479.02},t.modelParameters={a:-.002749688274522191,b:-8301768508494198e-20,d:.03741113513434366},t.options=["1","2","3"],t.default_option=t.options[0],t._onSelect=t._onSelect.bind(p(t)),t.onPermValv=t.onPermValv.bind(p(t)),t.onFeedValv=t.onFeedValv.bind(p(t)),t.onBufferValv=t.onBufferValv.bind(p(t)),t}return t=l,(a=[{key:"handleCalculations",value:function(){for(var e,t,a,n=this.membrane[this.state.membrane_selected],r=n.dex_rej,o=n.rb_rej,l=n.surface_area,s=this.state.b_dex_conc,i=this.state.b_rb_conc,c=[this.state.p_dex_conc*this.state.p_init_mass/1e3*this.molarMass.dex],u=[this.state.p_dex_conc],m=[this.state.f_dex_conc],_=[this.state.f_dex_conc*this.state.f_init_mass/1e3*this.molarMass.dex],d=[this.state.p_rb_conc*this.state.p_init_mass/1e3*this.molarMass.rb],f=[this.state.p_rb_conc],h=[this.state.f_rb_conc],p=[this.state.f_rb_conc*this.state.f_init_mass/1e3*this.molarMass.rb],v=this.state.f_init_mass,b=this.state.flow_rate,g=[0],E=[0],y=0,x=this.state.interval;x<this.state.runtime/this.state.interval;x+=this.state.interval){E.push(x);var C=(e=this.modelParameters,t=this.state.tmp,((a=this.state.flow_rate)*e.a/(t-a*e.b)+a*e.d)*l*this.state.interval);y+=C,g.push(C);var w=m[m.length-1]*Math.exp(C/b*-(1-r))*C/1e3*this.molarMass.dex,B=h[h.length-1]*Math.exp(C/b*-(1-o))*C/1e3*this.molarMass.rb,F=C*s/1e3*this.molarMass.dex,M=C*i/1e3*this.molarMass.rb;u.push((c[c.length-1]+w)/(y*this.molarMass.dex)),f.push((d[d.length-1]+B)/(y*this.molarMass.rb)),c.push(c[c.length-1]+w),d.push(d[d.length-1]+B),_.push(_[_.length-1]-w+F),m.push(_[_.length-1]/(v*this.molarMass.dex)),p.push(p[p.length-1]-B+M),h.push(p[p.length-1]/(v*this.molarMass.rb)),this.state.permeate_valve||(this.state.tmp=this.state.tmp-this.state.tmp*this.state.interval/60*this.valveConstants.permeate_closed_tmp_percentage_loss_per_hour),this.state.feed_valve&&(b-=b*this.state.interval/60*this.valveConstants.feed_open_volume_percentage_loss_per_hour),this.state.buffer_valve||(b-=b*this.state.interval/60*this.valveConstants.buffer_closed_volume_percentage_loss_per_hour)}return{time:E,permeate_dex_mass:c,permeate_dex_conc:u,flow_rates:g,feed_dex_conc:m,feed_dex_mass:_,permeate_rb_mass:d,permeate_rb_conc:f,feed_rb_conc:h,feed_rb_mass:p}}},{key:"downloadCSVFile",value:function(e){e.preventDefault();var t=this.handleCalculations(),a=document.createElement("a"),n=new Blob([b(this.state,t)],{type:"text/plain;charset=utf-8"});return a.href=URL.createObjectURL(n),a.download="membrane_data.csv",document.body.appendChild(a),a.click(),!1}},{key:"_onSelect",value:function(e){this.setState({membrane_selected:e.value})}},{key:"onPermValv",value:function(e){this.setState({permeate_valve:"on"===e.target.value})}},{key:"onFeedValv",value:function(e){this.setState({feed_valve:"on"===e.target.value})}},{key:"onBufferValv",value:function(e){this.setState({buffer_valve:"on"===e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement("h5",{className:"intro_header"},"Operating Parameters"),r.a.createElement(i.a,{id:"flow_rate",label:"Volumetric Flow Rate",onChange:function(){e.state.flow_rate=parseFloat(document.getElementById("flow_rate").value)},helperText:"Volumetric Flow Rate of Recirculation (mL/min)"}),r.a.createElement(i.a,{id:"tmp",label:"TMP",onChange:function(){e.state.tmp=parseFloat(document.getElementById("tmp").value)},helperText:"Transmembrane Pressure (bar)"}),r.a.createElement(i.a,{id:"runtime",label:"Runtime",onChange:function(){e.state.runtime=parseInt(document.getElementById("runtime").value)},helperText:"Experimental Runtime (minutes)"}),r.a.createElement(i.a,{id:"interval",label:"Intervals",onChange:function(){e.state.interval=parseFloat(document.getElementById("interval").value)},helperText:"Length of Interval (minutes)"})),r.a.createElement("div",null,r.a.createElement("h5",{className:"intro_header"},"Permeate Reservoir"),r.a.createElement("div",{className:"radio-div"},r.a.createElement("div",null,"Valve"),r.a.createElement("div",{onChange:this.onPermValv},r.a.createElement("input",{type:"radio",value:"on",name:"perm_valv"})," Open '",r.a.createElement("input",{type:"radio",value:"off",name:"perm_valv"})," Closed")),r.a.createElement(i.a,{id:"p_init_mass",label:"Mass",onChange:function(){e.state.p_init_mass=parseFloat(document.getElementById("p_init_mass").value)},helperText:"Permeate Initial Mass (g)"}),r.a.createElement(i.a,{id:"p_rb_conc",label:"RB",onChange:function(){e.state.p_rb_conc=parseFloat(document.getElementById("p_rb_conc").value)},helperText:"Permeate RB Concentration (mol/L)"}),r.a.createElement(i.a,{id:"p_dex_conc",label:"Dextran",onChange:function(){e.state.p_dex_conc=parseFloat(document.getElementById("p_dex_conc").value)},helperText:"Permeate Dextran Concentration (mol/L)"})),r.a.createElement("div",null,r.a.createElement("h5",{className:"intro_header"},"Feed Reservoir"),r.a.createElement("div",{className:"radio-div"},r.a.createElement("div",null,"Valve"),r.a.createElement("div",{onChange:this.onFeedValv},r.a.createElement("input",{type:"radio",value:"on",name:"feed_valv"})," Open '",r.a.createElement("input",{type:"radio",value:"off",name:"feed_valv"})," Closed")),r.a.createElement(i.a,{id:"f_init_mass",label:"Mass",onChange:function(){e.state.f_init_mass=parseFloat(document.getElementById("f_init_mass").value)},helperText:"Feed Initial Mass (g)"}),r.a.createElement(i.a,{id:"f_rb_conc",label:"RB",onChange:function(){e.state.f_rb_conc=parseFloat(document.getElementById("f_rb_conc").value)},helperText:"Feed RB Concentration (mol/L)"}),r.a.createElement(i.a,{id:"f_dex_conc",label:"Dextran",onChange:function(){e.state.f_dex_conc=parseFloat(document.getElementById("f_dex_conc").value)},helperText:"Feed Dextran Concentration (mol/L)"})),r.a.createElement("div",null,r.a.createElement("h5",{className:"intro_header"},"Buffer Reservoir"),r.a.createElement("div",{className:"radio-div"},r.a.createElement("div",null,"Valve"),r.a.createElement("div",{onChange:this.onBufferValv},r.a.createElement("input",{type:"radio",value:"on",name:"buffer_valv"})," Open '",r.a.createElement("input",{type:"radio",value:"off",name:"buffer_valv"})," Closed")),r.a.createElement(i.a,{id:"b_init_mass",label:"Mass",onChange:function(){e.state.b_init_mass=parseFloat(document.getElementById("b_init_mass").value)},helperText:"Buffer Initial Mass (g)"}),r.a.createElement(i.a,{id:"b_rb_conc",label:"RB",onChange:function(){e.state.b_rb_conc=parseFloat(document.getElementById("b_rb_conc").value)},helperText:"Buffer RB Concentration (mol/L)"}),r.a.createElement(i.a,{id:"b_dex_conc",label:"Dextran",onChange:function(){e.state.b_dex_conc=parseFloat(document.getElementById("b_dex_conc").value)},helperText:"Buffer Dextran Concentration (mol/L)"})),r.a.createElement("div",null,r.a.createElement("h5",{className:"intro_header"},"Membrane Selection"),r.a.createElement(u.a,{className:"dropdown",options:this.options,onChange:this._onSelect,value:this.default_option})),r.a.createElement("button",{className:"submit",onClick:this.downloadCSVFile.bind(this)},"Download")))}}])&&_(t.prototype,a),n&&_(t,n),l}(r.a.Component);a(32);var E=function(){return r.a.createElement("div",{className:"base-app"},r.a.createElement(g,null,"temp"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.b88a7c66.chunk.js.map